<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WatchVerse</title>
  <link rel="icon" href="/website/logo.png">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <section class="box">
    <div class="design">
      <div>
        <img src="/website/find_your_watch_600_v2_en.jpg" alt="" width="350rem">
      </div>
    </div>
    <div class="form">
      <h2>User Login</h2>
      <% if (typeof message !=='undefined' ) { %>
        <h4>
          <%= message %>
        </h4>
        <% } %>
          <form id="loginForm" action="/login" method="post">
            <input type="email" class="input-field" placeholder="Username" id="exampleInputEmail1" name="email"
              onkeyup="validateEmail()" />
            <span id="email" style="color: rgb(255, 0, 0);"></span>
            <input type="password" class="input-field" placeholder="Password" name="password" />
            <input onclick="return validateForm()" type="submit" class="btn" value="LOGIN">
            <span id="submit-error" style="color: rgb(255, 0, 0);"></span>
          </form>
          <p>Forgot Password ? <a href="/forgot-password">click here</a></p>
          <br>
          <p>Not a user ? <a href="/register">Register here</a></p>
    </div>
  </section>



  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

<script>
  var emailError = document.getElementById("email")
  var submitError = document.getElementById("submit-error");

  function validateEmail() {
    var email1 = document.getElementById("exampleInputEmail1").value;
    if (email1.length == 0) {
      emailError.innerHTML = "Email is required";
      return false;
    }
    if (!email1.match(/^([a-zA-Z0-9\._]+)@([a-zA-z0-9])+.([a-z]+)(.[a-z]+)?$/)) {
      emailError.innerHTML = "Email is invalid";
      return false;
    }
    emailError.innerHTML = "";
    return true;
  }


  function validateForm() {
    if (!validateEmail()) {
      submitError.style.display = 'block';
      submitError.innerHTML = "Please enter a valid email";
      setTimeout(function () { submitError.style.display = 'none'; }, 3000);
      return false;
    }
  }
</script>